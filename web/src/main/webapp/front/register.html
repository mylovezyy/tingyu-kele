<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="../static/css/index.css">
    <link rel="stylesheet" href="../static/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../static/layer/theme/default/layer.css">
    <link rel="stylesheet" href="../static/css/base.css">
    <link rel="stylesheet" href="../static/css/about.css">
    <script type="text/javascript" src="../static/js/jquery-1.12.3.min.js"></script>
    <script type="text/javascript" src="../static/js/jquery.validate.js"></script>
    <script type="text/javascript" src="../static/layer/layer.js"></script>

    <title>ting域注册页面</title>
</head>


<body>
<!-- 顶部导航布局开始 -->
<div>
    <div class="nav_login">
        <div class="juzhong">
            <p>Ting域主持人欢迎您！ 客服：18812345678</p>
            <p class="p_login"><a href="#"> 登录 | 注册</a></p>
        </div>
    </div>
    <div class="nav_logo">
        <div class="juzhong">
            <img src="../static/img/logo.jpg" alt="">
        </div>
    </div>


</div>


<div class="container" style="width: 800px;margin: 30px auto;border:1px solid orange;border-radius: 25px">
    <div class="row" style="font-size: 25px">
        <div class="col-xs-6" onclick="changeDisplay('company')" style="text-align: right">我是公司&nbsp;&nbsp;&nbsp;&nbsp;|</div>
        <div class="col-xs-6" onclick="changeDisplay('married')">我是新人</div>
    </div>

    <div id="marriedBox" style="margin: 0 auto;width: 500px;margin-top: 20px">
        <form id="marriedForm" class="form-horizontal">
            <div class="form-group">
                <label for="pname" class="col-sm-2 control-label">姓名</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="pname" name="pname" placeholder="新人姓名">
                </div>
            </div>
            <div class="form-group">
                <label for="ppwd" class="col-sm-2 control-label">密码</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="ppwd" name="ppwd" placeholder="请输入密码">
                </div>
            </div>
            <div class="form-group">
                <label for="okpwd" class="col-sm-2 control-label">确认密码</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="okpwd" name="okpwd" placeholder="请再次输入密码">
                </div>
            </div>
            <div class="form-group">
                <label for="marrydate" class="col-sm-2 control-label">婚礼日期</label>
                <div class="col-sm-10">
                    <input type="date" class="form-control" id="marrydate" name="marrydate" placeholder="请选择结婚日期">
                </div>
            </div>
            <div class="form-group">
                <label for="pmail" class="col-sm-2 control-label">邮箱</label>
                <div class="col-sm-10">
                    <input type="email" class="form-control" id="pmail" name="pmail" placeholder="请输入邮箱">
                </div>
            </div>
            <div class="form-group">
                <label for="phone" class="col-sm-2 control-label">电话号码</label>
                <div class="col-sm-6">
                    <input type="text" class="form-control" id="phone" name="phone" placeholder="请输入电话号码">
                </div>
                <div class="col-sm-4">
                    <button type="button" id="sendSmsCode" class="btn btn-success">发送验证码</button>
                </div>
            </div>
            <div class="form-group">
                <label for="verifyCode" class="col-sm-2 control-label">验证码</label>
                <div class="col-sm-4">
                    <input type="text"  class="form-control" id="verifyCode" name="verifyCode" placeholder="验证码">
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default">注册</button>
                </div>
            </div>
        </form>
    </div>

    <div id="companyBox" style="margin: 0 auto;width: 500px;margin-top: 20px;display: none">
        <form class="form-horizontal">
            <div class="form-group">
                <label for="cname" class="col-sm-2 control-label">姓名</label>
                <div class="col-sm-10">
                    <input type="email" class="form-control" id="cname" name="cname" placeholder="新人姓名">
                </div>
            </div>
            <div class="form-group">
                <label for="cpwd" class="col-sm-2 control-label">密码</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="cpwd" name="cpwd" placeholder="请输入密码">
                </div>
            </div>

            <div class="form-group">
                <label for="cmail" class="col-sm-2 control-label">邮箱</label>
                <div class="col-sm-10">
                    <input type="email" class="form-control" id="cmail" name="cmail" placeholder="请输入邮箱">
                </div>
            </div>
            <div class="form-group">
                <label for="cphone" class="col-sm-2 control-label">电话号码</label>
                <div class="col-sm-6">
                    <input type="text" class="form-control" id="cphone" name="cphone" placeholder="请输入电话号码">
                </div>
                <div class="col-sm-4">
                    <button type="button"  class="btn btn-success">发送验证码</button>
                </div>
            </div>


            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default">注册</button>
                </div>
            </div>
        </form>
    </div>

</div>

</div>

<div class="search_box">

    <!-- 底部开始 -->
    <div class='footer'>
        <div class='footer_warp'>
            <div class='footer_left'>
                <p class='footer_left_top'>联系我们</p>
                <p class='footer_left_content'>公司地址：北京市长安街天安门1号 / 监督电话：18812345678</p>
                <p class='footer_left_bottom'>copyright2016-2019 版权归Ting域主持人所有 </p>
            </div>
            <div class='footer_right'>
                <div class='QR_left'>
                    <img src="../static/img/QR_04.png" alt="">
                    <div class='QR_left_img'>
                        <img src="../static/img/QR_03.png" alt="">
                    </div>
                    <p>官方服务号</p>
                </div>
                <div class='QR_left'>
                    <img src="../static/img/QR_02.png" alt="">
                    <div class='QR_left_img'>
                        <img src="../static/img/QR_01.png" alt="">
                    </div>
                    <p>官方服务号</p>
                </div>
            </div>
        </div>
    </div>
    <!-- 底部结束 -->
    <!-- 固定定位导航布局开始 -->
    <div class="QR_right">
        <div class='QR_right_top'>
            <!-- <img src="img/QR_small.png" alt=""> -->
            <img src="../static/img/QR_small.png" alt="">
            <div class='QR_box'>
                <div class='QR_box_content'>
                    <img src="../static/img/QR_right.png" alt="">
                    <p class='QR_box_content_font'>关注官方二维码接受订单通知</p>
                </div>
                <div class='QR_box_triangle'>
                    <img src="../static/img/sanjiao.png" alt="">
                </div>
            </div>
        </div>
        <a href="#">
            <div class='QR_right_bottom'>
                <img src="../static/img/jiantou.png" alt="">
            </div>
        </a>
    </div>

    <!-- 固定定位导航布局结束 -->
</div>
</body>
<!--验证码js-->
<script>
<!--    验证验证码,需要放到表单验证当中-->
// function checkCode(){
//     var verifyCode=  $("#verifyCode").val();
//     if(verifyCode.length<6  || verifyCode.length>6){
//         layer.msg("验证码格式有误",{icon:5});
//         return false;
//     }
//     $.post(
//         "/tingyu/checkCode.do",
//         {verifyCode:verifyCode},
//         function (data) {
//             layer.tips(data.msg, '#verifyCode');
//         }
//         )
// }


<!--    发送验证码-->
    $("#sendSmsCode").click(function () {
        var phone=$("#phone").val();
        if(phone==""){
            layer.msg("手机号不能为空",{icon:5});
            return false;
        }
        var phoneReg=/^1([38][0-9]|4[5-9]|5[0-3,5-9]|66|7[0-8]|9[89])[0-9]{8}$/;
        if(!phoneReg.test(phone)){
            layer.msg("手机号格式有误",{icon:5});
            return false;
        }
        $.post(
            "/tingyu/sendSms.do",
            {phone:phone},
            function (data) {

                data = JSON.parse(data);
                console.log(data)
                //    验证码倒计时功能
                if (data.Code == "OK") {
                    //    设置时间倒计时
                    var time = 10;
                    var setinterval = setInterval(function () {
                        $("#sendSmsCode").text(time + "秒后重新验证");
                        $("#sendSmsCode").attr("disabled", true);
                        console.log(time)
                        if (time == 0) {
                            $("#sendSmsCode").text("发送验证码");
                            $("#sendSmsCode").attr("disabled", false);
                            clearInterval(setinterval);
                        }
                        time--;
                    }, 1000)
                }
            })
    })




</script>



<!--新人表单验证注册js-->
<script type="text/javascript">
<!--自定义验证规则-->
    jQuery.validator.addMethod("isChinese", function(value, element) {
        return this.optional(element) || /^[\u4e00-\u9fa5]+$/.test(value);
    }, "只能输入汉字");

jQuery.validator.addMethod("isPwd", function(value, element) {
    return this.optional(element) || /^[a-zA-Z]\w{5,11}$/.test(value);
}, "以字母开头，长度在6-12之间，只能包含字符、数字和下划线。");



<!--验证表单 这里我们使用jq的验证插件-->
    $(function () {
        $("#marriedForm").validate({
            rules:{
                pname:{
                    required:true,
                    minlength:2,
                    isChinese:true
                },
                ppwd:{
                    required:true,
                    isPwd:true
                },
                okpwd:{
                    required:true,
                    equalTo:"#ppwd"
                },
                marrydate:{
                    required:true,
                },
                pmail:{
                    required:true,
                    email:true

                },
                phone:{
                    required:true,
                },
                verifyCode:{
                    required:true,
                    remote: {
                        url: "/tingyu/checkCode.do",     //后台处理程序
                        type: "post",               //数据发送方式
                        dataType: "json",           //接受数据格式
                        data: {                     //要传递的数据
                            verifyCode: function() {
                                return $("#verifyCode").val();
                            }
                        }
                    }
                }
            },
            //验证失败提示信息
            messages:{
                pname:{
                    required:"不能为空",
                    minlength:"长度不能小于2",
                    isChinese:"只能是中文"
                },ppwd:{
                    required:"不能为空",
                    isPwd:"以字母开头，长度在6-12之间，只能包含字符、数字和下划线。"
                },
                okpwd:{
                    required:"不能为空",
                    equalTo:"密码不一致"
                },
                marrydate:{
                    required:"不能为空",

                },
                pmail:{
                    required:"不能为空",
                    email:"格式有误"

                },
                phone:{
                    required:"不能为空",
                },
                verifyCode:{
                    required:"不能为空",
                    remote:"验证码有误"
                }
            },
            submitHandler:function (form) {
                var formData= $(form).serialize();

                $.ajax({
                    type:"post",
                    url:"/tingyu/married/insert.do",
                    data:formData,
                    success:function (data) {
                        if(data.status==200){
                            layer.msg("恭喜您注册成功",function () {
                                window.location.href="/tingyu/front/login.html";
                            })
                        }
                    }
                })
            }
        })
    })


</script>

<!--我是新人，我是公司切换js-->
<script type="text/javascript">

    function changeDisplay(obj) {
        if(obj=="company"){
            $("#companyBox").css("display","block");
            $("#marriedBox").css("display","none");
        }
        if(obj=="married"){
            $("#companyBox").css("display","none");
            $("#marriedBox").css("display","block");
        }

    }
</script>

</html>
